<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Edge</title>
    <style>

        #mainMenuOverlay {
            position: absolute;
            z-index: 1;
            top: 0;
            left: 0;
            width: 100%;
            height:100%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;

            background: url("textures/menu/the edge_main_menu.jpg") no-repeat center center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
        }

        #mainMenuOverlay > div {
            text-align: center;
        }

        #mainMenuOverlay > div > button {
            height: 40px;
            width: 100px;
            background: transparent;
            color: #654321;
            outline: 2px solid #654321;
            border: 0;
            cursor: pointer;
        }

        #mainMenuOverlay > div > button:hover{
            background-color: #654321;
            color: white;
        }

        #pauseMenuOverlay{
            position: absolute;
            z-index: 1;
            display: none;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("textures/menu/the edge_main_menu.jpg") no-repeat center center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }

        #pauseMenuOverlay > div {
            text-align: center;
        }

        #pauseMenuOverlay > div > button {
            height: 40px;
            width: 100px;
            background: transparent;
            color: #654321;
            outline: 2px solid #654321;
            border: 0;
            cursor: pointer;
        }

        #pauseMenuOverlay > div > button:hover{
            background-color: #654321;
            color: white;
        }

        #gameOverOverlay{
            position: absolute;
            z-index: 1;
            display: none;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("textures/menu/the edge_game_over.jpg") no-repeat center center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }

        #gameOverOverlay > div{
            text-align: center;
        }

        #gameOverOverlay > div > button{
            height: 40px;
            width: 100px;
            background: transparent;
            color: #654321;
            outline: 2px solid #654321;
            border: 0;
            cursor: pointer;
        }

        #gameOverOverlay > div > button:hover{
            background-color: #654321;
            color: white;
        }

    </style>
</head>
<body>

<!-- adds main menu before game starts -->
<div id="mainMenuOverlay">
    <div>
        <button id="start">Click to Play</button>
        <button id="fullScreen">FullScreen</button>
    </div>
</div>

<!-- adds menu when game is paused -->
<div id="pauseMenuOverlay">
    <div>
        <button id="resume">Resume</button>
        <button id="restart">Restart</button>
        <button id="pFullScreen">FullScreen</button>
    </div>
</div>

<!-- gameOver overlay for when the player looses -->
<div id="gameOverOverlay">
    <div>
        <button id="gameOverRestart">Restart</button>
    </div>
</div>


<audio id="audio" src="sounds/jump.mp3"/>
<audio id="ballExplosion" src="sounds/explosion.mp3"/>
<audio id="newLevel" src="sounds/new_level.mp3"/>

<script src="js/three.js"></script>
<script src="js/Obstacles.js"></script>
<script src="js/OrbitControls.js"></script>
<script src="js/PointerLockControls.js"></script>
<script src="js/Tree.js"></script>
<script src="js/TreeGeometry.js"></script>
<script src="js/TreeHelper.js"></script>
<script src="js/PowerUps.js"></script>
<script src="js/GameWorld.js"></script>
<script src="js/HeroBall.js"></script>
<script src="js/KeyboardControls.js"></script>
<script src="js/BlockSet.js"></script>
<script src="js/PowerUpSet.js"></script>
<script src="js/GameLogicBuilder.js"></script>
<script src="js/THREEx.FullScreen.js"></script>

<script>


    //for debugging
    (function(){
        const script = document.createElement('script');
        script.onload=function(){
            const stats = new Stats();
            document.body.appendChild(stats.dom);
            requestAnimationFrame(function loop(){
                stats.update();
                requestAnimationFrame(loop)});
        };
        script.src='//mrdoob.github.io/stats.js/build/stats.min.js';
        document.head.appendChild(script);})();


    document.getElementById("start").addEventListener('click', startGame);
    document.getElementById("resume").addEventListener('click', resumeGame);
    document.getElementById("fullScreen").addEventListener('click', handleFullScreen);
    document.getElementById("pFullScreen").addEventListener('click', handleFullScreen);
    document.getElementById("restart").addEventListener('click', restartGame);
    document.getElementById("gameOverRestart").addEventListener('click', restartGame);

    loadFont();

    function startGame() {

        //remove the overlay
        document.getElementById('mainMenuOverlay').remove();

        addBackgroundMusic();

        //builds the world /-- PARENT: GAME WORLD --\
        initWorld();

        //initialize key press /-- PARENT: KEYBOARD CONTROLS --\
        initKeyboard();

        //describes how the game will be taking place /-- PARENT: GAME WORLD --\
        GameLoop();


    }

    function handleFullScreen() {
        if (THREEx.FullScreen.available()) {
            if( THREEx.FullScreen.activated() ){
                THREEx.FullScreen.cancel();
            }else{
                THREEx.FullScreen.request();
            }
        }

    }

    function restartGame(){
        document.location.reload();
    }

</script>
</body>
</html>